{"version":3,"file":"tooltip.js","sourceRoot":"","sources":["../../../../../../../src/components/tooltip/tooltip.ts"],"names":["Tooltip","Tooltip.constructor","Tooltip.content","Tooltip.setContent","Tooltip.setHover","Tooltip.onClick","Tooltip.onHostClick","Tooltip.onFocus","Tooltip.onBlur","Tooltip.onHostMouseOver","Tooltip.onHostMouseOut","Tooltip.destroy","Tooltip.hide","Tooltip.show","Tooltip.createStyleSheet","Tooltip.positionElement","Tooltip.addListener"],"mappings":"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AASA,CAACA,QAAQA,CAACA,eAAeA,CAACA,EAAEA,CAACA;gBAC3CA,CAACA,CAACA,SAASA,CAACA,MAAMA,CAACA,eAAeA,CAACA,CAACA;YACxCA,CAACA;QACLA,CAACA;QAEDA,IAAIA,CAACA,SAASA,CAACA,SAASA,CAACA,GAAGA,CAACA,eAAeA,CAACA,CAACA;QAC9CA,IAAIA,CAACA,SAASA,CAACA,eAAeA,CAACA,QAAQA,CAACA,CAACA;QAEzCA,IAAIA,CAACA,UAAUA,EAAEA,CAACA;QAElBA,IAAIA,eAAeA,GAAWA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,CAACA;QAC7EA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,MAAMA,CAACA,sBAAsBA,CAACA,CAACA;QACvDA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,MAAMA,CAACA,yBAAyBA,CAACA,CAACA;QAC1DA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,GAAGA,CAACA,sBAAoBA,eAAiBA,CAACA,CAACA;QAEnEA,iBAAiBA;QACjBA,oBAAoBA;QACpBA,KAAKA,IAAIA,CAACA,IAAIA,CAACA,WAAWA,CAACA;QAC3BA,mBAAmBA;QAEnBA,cAAcA;QACdA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,GAAGA,CAACA,0BAA0BA,CAACA,CAACA;QACxDA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,GAAGA,CAACA,uBAAuBA,CAACA,CAACA;QAErDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,WAAWA,CAACA,CAACA,CAACA;YACnBA,IAAIA,CAACA,QAAQA,CAACA,aAAaA,CAACA,wBAAwBA,CAAiBA,CAACA,KAAKA,EAAEA,CAACA;QACnFA,CAACA;QACDA,0EAA0EA;QAC1EA,EAAEA,CAACA,CAACA,CAACA,CAACA,MAAMA,CAACA,UAAUA,CAACA,oBAAoBA,CAACA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;YACrDA,QAAQA,CAACA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","sourcesContent":["const ARROW_HEIGHT: number = 15;\r\nconst MOBILE_BREAKPOINT: number = 768;\r\n\r\n// Template for our tooltip\r\nconst TOOLTIP: string = `\r\n<div class=\"tooltip\" hidden x-uno-tooltip-window>\r\n    <div class=\"tooltip__backdrop\"></div>\r\n    <div class=\"tooltip__window\">\r\n        <div class=\"tooltip__body\" role=\"status\"></div>\r\n        <div class=\"tooltip__footer\" tabindex=\"0\">\r\n            <button class=\"tooltip__close-button\"><span class=\"icon icon-cross\" role=\"presentation\"></span>sluit</button>\r\n        </div>\r\n    </div>\r\n</div>`;\r\n\r\n/**\r\n * Abstract class for tooltips.\r\n */\r\nexport class Tooltip {\r\n\r\n    private openOnHover: boolean;\r\n    private container: HTMLElement;\r\n    private _content: string;\r\n    private _tooltip: HTMLElement;\r\n    private _parent: HTMLElement;\r\n    private isHover: Boolean = false;\r\n    private hostEvents: Array<any> = [];\r\n    private stylesheet: CSSStyleSheet;\r\n\r\n    public set content(value: string) {\r\n        this._content = value ? value : '';\r\n    }\r\n\r\n    public get content(): string {\r\n        return this._content;\r\n    }\r\n\r\n    constructor(private host:HTMLElement) {\r\n        if (!host.hasAttribute('title')) {\r\n            throw new Error(`Tooltip is missing a title attribute`);\r\n        }\r\n\r\n        this._content = host.getAttribute('title');\r\n        host.removeAttribute('title');\r\n\r\n        host.classList.add('tooltip-trigger');\r\n\r\n        this.stylesheet = this.createStyleSheet().sheet as CSSStyleSheet;\r\n\r\n        let wrapper: HTMLElement = document.createElement('div');\r\n        wrapper.innerHTML = TOOLTIP;\r\n        wrapper.setAttribute('aria-live', 'polite');\r\n        this.container = wrapper.firstElementChild as HTMLElement;\r\n        this._parent = wrapper;\r\n        this._parent.classList.add('tooltip__parent');\r\n        this._tooltip = this.container.querySelector('.tooltip__window') as HTMLElement;\r\n        const closeButton: HTMLElement = this.container.querySelector('.tooltip__close-button') as HTMLElement;\r\n\r\n        this.setHover();\r\n\r\n        this.addListener(host, 'click', this.onHostClick.bind(this));\r\n        this.addListener(host, 'mouseover', this.onHostMouseOver.bind(this));\r\n        this.addListener(host, 'mouseout', this.onHostMouseOut.bind(this));\r\n        this.addListener(host, 'focus', this.onFocus.bind(this));\r\n        this.addListener(host, 'blur', this.onBlur.bind(this));\r\n        this.addListener(closeButton, 'click', this.onClick.bind(this));\r\n\r\n        host.parentNode.insertBefore(this._parent, host.nextSibling);\r\n    }\r\n\r\n    private setContent(): void {\r\n\r\n        const tooltipBody: HTMLElement = this.container.querySelector('.tooltip__body') as HTMLElement;\r\n\r\n        if (tooltipBody) {\r\n            tooltipBody.innerHTML = this._content;\r\n        }\r\n    }\r\n\r\n    private setHover(): void {\r\n        if (window.matchMedia('(min-width: 768px)').matches) {\r\n            this.openOnHover = true;\r\n        } else {\r\n            this.openOnHover = false;\r\n        }\r\n    }\r\n\r\n    private onClick(evt: Event): void {\r\n        this.hide();\r\n    }\r\n\r\n    /**\r\n     * Called when the user clicks the host. Set hover to false to prevent mouse\r\n     * Mouse move events\r\n     * @param evt\r\n     */\r\n    private onHostClick(evt: Event): void {\r\n        if (!this.openOnHover) {\r\n            this.isHover = false;\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    private onFocus(evt: KeyboardEvent): void {\r\n        this.show();\r\n    }\r\n\r\n    private onBlur(evt: KeyboardEvent): void {\r\n        this.hide();\r\n    }\r\n\r\n    /**\r\n     * Called when the user hovers over the host component, cancelled when a\r\n     * touch event precedes this event.\r\n     * @param evt\r\n     */\r\n    private onHostMouseOver(evt: Event): void {\r\n        if (!this.openOnHover) {\r\n            evt.preventDefault();\r\n        } else {\r\n            this.isHover = true;\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when the mouse leaves the component, cancelled when a touch event\r\n     * precedes this event\r\n     * @param evt\r\n     */\r\n    private onHostMouseOut(evt: Event): void {\r\n        if (!this.openOnHover) {\r\n            evt.preventDefault();\r\n        } else if (this.isHover) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        // Stop listening for events\r\n        this.hide();\r\n        this.hostEvents.forEach((ref: any) => {\r\n            ref.element.removeEventListener(ref.event, ref.listener);\r\n        });\r\n\r\n        this.hostEvents = [];\r\n\r\n    }\r\n\r\n    /**\r\n     * Hides the tooltip and restores the focus\r\n     */\r\n    private hide(): void {\r\n        this.container.classList.remove('tooltip--open');\r\n        this.container.setAttribute('hidden', '');\r\n        // op kleine schermen waar een backdrop getoond wordt, scroll onderdrukken\r\n        if (!(window.matchMedia('(min-width: 768px)').matches)) {\r\n            document.querySelector('body').classList.remove('no-scroll');\r\n        }\r\n\r\n        this.isHover = false;\r\n    }\r\n\r\n    private show(): void {\r\n        let openTooltips:NodeList = document.querySelectorAll('.tooltip--open');\r\n        for (let i:number = 0; i < openTooltips.length; i ++){\r\n            let e:HTMLElement = openTooltips[i] as HTMLElement;\r\n            while (e.classList.contains('tooltip--open')) {\r\n                e.classList.remove('tooltip--open');\r\n            }\r\n        }\r\n\r\n        this.container.classList.add('tooltip--open');\r\n        this.container.removeAttribute('hidden');\r\n\r\n        this.setContent();\r\n\r\n        let tooltipPosition: string = this.positionElement(this.host, this._tooltip);\r\n        this._tooltip.classList.remove(`tooltip__window--top`);\r\n        this._tooltip.classList.remove(`tooltip__window--bottom`);\r\n        this._tooltip.classList.add(`tooltip__window--${tooltipPosition}`);\r\n\r\n        // Trigger reflow\r\n        /* tslint:disable */\r\n        void this.host.offsetWidth;\r\n        /* tslint:enable */\r\n\r\n        // Now animate\r\n        this._tooltip.classList.add('tooltip__window--animate');\r\n        this._tooltip.classList.add('tooltip__window--show');\r\n\r\n        if (!this.openOnHover) {\r\n            (this._tooltip.querySelector('.tooltip__close-button') as HTMLElement).focus();\r\n        }\r\n        // op kleine schermen waar een backdrop getoond wordt, scroll onderdrukken\r\n        if (!(window.matchMedia('(min-width: 768px)').matches)) {\r\n            document.querySelector('body').classList.add('no-scroll');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a stylesheet in the head section of the page. Only 1 stylesheet\r\n     * per page will be created\r\n     * @return {HTMLStyleElement}\r\n     */\r\n    private createStyleSheet(): HTMLStyleElement {\r\n        let sheet: HTMLStyleElement = document.querySelector('style[x-uno-tooltip-stylesheet]') as HTMLStyleElement;\r\n        if (!sheet) {\r\n            sheet = document.createElement('style');\r\n            sheet.setAttribute('x-uno-tooltip-stylesheet', '');\r\n            document.head.appendChild(sheet);\r\n        }\r\n        return sheet;\r\n    }\r\n\r\n    /**\r\n     * Calculates the position of the tooltip\r\n     */\r\n    private positionElement(host: HTMLElement, target: HTMLElement): string {\r\n        if (window.innerWidth > MOBILE_BREAKPOINT) {\r\n            // pre existing rule might no longer be valid, so always remove\r\n            // if necessary it will be added later\r\n            if (this.stylesheet.rules && this.stylesheet.rules.length > 0) {\r\n                this.stylesheet.removeRule(0);\r\n            }\r\n\r\n            let tooltipHeight: number = parseInt(getComputedStyle(target).height);\r\n            let tooltipWidth: number = parseInt(getComputedStyle(target).width);\r\n\r\n            let bodyRect: ClientRect = document.body.getBoundingClientRect();\r\n            let hostRect: ClientRect = host.getBoundingClientRect();\r\n\r\n            let tooltipPosition: string = 'top';\r\n\r\n            // Calculate desired tooltip position. Default is above the host\r\n            let x: number = -hostRect.width / 2 - tooltipWidth / 2;\r\n            let y: number = -tooltipHeight - ARROW_HEIGHT - 20;\r\n\r\n            let dx: number; // variable used if position is too much to the left or right\r\n\r\n            if (hostRect.top - tooltipHeight < 10) {\r\n                // Not enough space at the top, position below the host\r\n                y = hostRect.height;\r\n                tooltipPosition = 'bottom';\r\n            }\r\n\r\n            if (hostRect.right + x < 0) {\r\n                // Element positioned too far to the left (offscreen)\r\n                // Position the tooltip 20px from the left of the screen\r\n                dx = -hostRect.right - x;\r\n                x = 20 + x + dx; // 20 - hostRect.width;\r\n                // reposition the arrow as well, default left is 135 px\r\n                let arrowOffset: number = 135 - dx - 20;\r\n                this.stylesheet.insertRule(`.tooltip__window::before { left: ${arrowOffset}px }`, 0);\r\n\r\n            } else if (hostRect.right + x + tooltipWidth > bodyRect.width) {\r\n                // Element positioned too far to the right\r\n                // Position the tooltip 10px from the right of the screen\r\n                dx = bodyRect.width - hostRect.right - tooltipWidth - x;\r\n                x = x + dx - 10;\r\n                // reposition the arrow as well, default left is 135 px\r\n                let arrowOffset: number = 135 - dx + 10;\r\n                this.stylesheet.insertRule(`.tooltip__window::before { left: ${arrowOffset}px }`, 0);\r\n            }\r\n\r\n            target.style.left = `${Math.round(x)}px`;\r\n            target.style.top = `${Math.round(y)}px`;\r\n            return tooltipPosition;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds an eventlistener to the element, while storing a reference to the\r\n     * listener.\r\n     * @param element\r\n     * @param event\r\n     * @param listener\r\n     */\r\n    private addListener(element: Node, event: string, listener: EventListenerObject): void {\r\n        this.hostEvents.push({\r\n            element: element,\r\n            event: event,\r\n            listener: listener\r\n        });\r\n\r\n        element.addEventListener(event, listener);\r\n    }\r\n}\r\n"]}