{"version":3,"file":"Animation.js","sourceRoot":"","sources":["../../../../../../../src/core/animations/Animation.ts"],"names":["Animation","Animation.constructor","Animation.animationDuration","Animation.ease","Animation.value","Animation.delta","Animation.initialValue","Animation.start","Animation.cancel","Animation.progress","Animation.end","Animation.dispatch"],"mappings":"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","sourcesContent":["import {Easings} from './Easings';\r\n\r\nexport abstract class Animation {\r\n\r\n    private _ease: string = 'easeOutCubic';\r\n    private _animationDuration: number = 30;\r\n\r\n    private _step: number = 0;\r\n    private _value: number;\r\n    private _delta: number;\r\n    private _initialValue: number;\r\n\r\n    protected canAnimate: boolean;\r\n\r\n    constructor(protected element: HTMLElement) {\r\n        // Feature detection\r\n        this.canAnimate = typeof window.requestAnimationFrame === 'function';\r\n    }\r\n\r\n    /**\r\n     * The number of frames this animation runs\r\n     * @default 30\r\n     * @returns {number}\r\n     */\r\n    get animationDuration(): number {\r\n        return this._animationDuration;\r\n    }\r\n\r\n    set animationDuration(value: number) {\r\n        this._animationDuration = value;\r\n    }\r\n\r\n    /**\r\n     * The easing equation to use\r\n     * @return {string}\r\n     */\r\n    get ease(): string {\r\n        return this._ease;\r\n    }\r\n\r\n    set ease(value: string) {\r\n        if (Easings.hasOwnProperty(value)) {\r\n            this._ease = value;\r\n        } else {\r\n            throw new Error(`Easing equation '${value}' does not exist`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The current value / position of the animation\r\n     * @return {number}\r\n     */\r\n    get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    set value(value: number) {\r\n        this._value = value;\r\n    }\r\n\r\n    /**\r\n     * The change between the start & end position of the animation\r\n     * @return {number}\r\n     */\r\n    get delta(): number {\r\n        return this._delta;\r\n    }\r\n\r\n    set delta(value: number) {\r\n        this._delta = value;\r\n    }\r\n\r\n    /**\r\n     * The start value of the animation\r\n     * @return {number}\r\n     */\r\n    get initialValue(): number {\r\n        return this._initialValue;\r\n    }\r\n\r\n    set initialValue(value: number) {\r\n        this._initialValue = value;\r\n    }\r\n\r\n    /**\r\n     * Starts the animation, dispatches `uno-animation-start`\r\n     */\r\n    public start(): void {\r\n        this.dispatch('uno-animation-start');\r\n        if (this.canAnimate) {\r\n            this._step = 0;\r\n            this.element.classList.add('animating');\r\n            requestAnimationFrame(this.progress.bind(this));\r\n        } else {\r\n            this.value = this.initialValue + this.delta;\r\n            this.end();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @todo Implement\r\n     */\r\n    public cancel(): void {\r\n        this.element.classList.remove('uno-animating');\r\n        this.dispatch('uno-animation-cancel');\r\n    }\r\n\r\n    /**\r\n     * Called on each iteration of the animation, dispatches `uno-animation-progress`\r\n     */\r\n    protected progress(): void {\r\n        this.value = Easings[this.ease](\r\n            Math.min(this._step++, this.animationDuration),\r\n            this.initialValue,\r\n            this.delta,\r\n            this.animationDuration);\r\n\r\n        this.dispatch('uno-animation-progress', this.value);\r\n        if (this._step <= this.animationDuration) {\r\n            requestAnimationFrame(this.progress.bind(this));\r\n        } else {\r\n            // Call end via an animationFrame to make sure it's executed\r\n            // in the next 'tick'. Otherwise, it will be called before the\r\n            // last progress event;\r\n            requestAnimationFrame(this.end.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when the animation is finished, dispatches `uno-animation-end`\r\n     */\r\n    protected end(): void {\r\n        this.element.classList.remove('animating');\r\n        this.dispatch('uno-animation-end');\r\n    }\r\n\r\n    /**\r\n     * Dispatches an event on the host element\r\n     * @param eventName The name of the event to dispatch\r\n     * @param data Additional data to send with the event\r\n     */\r\n    private dispatch(eventName: String, data: any = null): void {\r\n        let event: any = document.createEvent('CustomEvent');\r\n        event.initCustomEvent(eventName, true, true, data);\r\n        this.element.dispatchEvent(event);\r\n    }\r\n\r\n}\r\n"]}