{"version":3,"file":"collapse.js","sourceRoot":"","sources":["../../../../../../../src/components/collapse/collapse.ts"],"names":["Collapse","Collapse.constructor","Collapse.close","Collapse.open","Collapse.focusFirstChild","Collapse.destroy","Collapse.handleEvent","Collapse.toggle","Collapse.onCollapseOpen","Collapse.onCollapseClose","Collapse.onCollapseGroupOpen","Collapse.onTitleClick","Collapse.onTitleKeyDown","Collapse.onDetailsUnoAnimationEnd","Collapse.onDetailsUnoAnimationProgress","Collapse.findTarget","Collapse.groupCollapses","Collapse.setupAnimation","Collapse.setAria"],"mappings":"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AAqBA,GAAYA,KAAKA,CAACA;QAE3CA,iDAAiDA;QACjDA,eAAeA,CAACA,OAAOA,CAACA,UAACA,SAAiBA;YACtCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;gBAC/BA,IAAIA,OAAOA,GAAWA,IAAIA,CAACA,YAAYA,CAACA,SAASA,CAACA,CAACA;gBACnDA,SAASA,GAAGA,QAAQA,CAACA,gBAAgBA,CAACA,MAAIA,SAASA,WAAKA,OAAOA,QAAIA,CAACA,CAACA;gBACrEA,qBAAqBA,GAAGA,IAAIA,CAACA;YACjCA,CAACA;QACLA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,CAACA,CAACA,qBAAqBA,CAACA,CAACA,CAACA;YACzBA,gEAAgEA;YAChEA,mEAAmEA;YACnEA,OAAOA,IAAIA,CAACA,aAAaA,IAAIA,CAACA,SAASA,EAAEA,CAACA;gBACtCA,IAAIA,GAAGA,IAAIA,CAACA,aAAaA,CAACA;gBAE1BA,eAAeA,CAACA,OAAOA,CAACA,UAACA,SAAiBA;oBACtCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;wBAC/BA,yDAAyDA;wBACzDA,SAASA,GAAGA,IAAIA,CAACA,gBAAgBA,CAACA,kBAAkBA,CAACA,CAACA;oBAC1DA,CAACA;gBACLA,CAACA,CAACA,CAACA;YAEPA,CAACA;QACLA,CAACA;QAEDA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA,CAACA;YACZA,IAAIA,CAACA,gBAAgBA,GAAGA,EAAEA,CAACA;YAE3BA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAWA,CAACA,EAAEA,CAACA,GAAGA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAChDA,IAAIA,CAACA,gBAAgBA,CAACA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA;gBAC9CA,SAASA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA,gBAAgBA,CAACA,eAAeA,EAAEA,IAAIA,CAACA,CAACA;YAC9DA,CAACA;QACLA,CAACA;IACLA,CAACA;IAEOhB,iCAAcA,GAAtBA;QAEIiB,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,yBAAWA,CAACA,IAAIA,CAACA,OAAsBA,CAACA,CAACA;QAC5DA,IAAIA,CAACA,OAAOA,CAACA,WAAWA,GAAGA,YAAYA,CAACA;QACxCA,IAAIA,CAACA,OAAOA,CAACA,iBAAiBA,GAAGA,CAACA,CAACA;QAEnCA,IAAIA,CAACA,OAAOA,CAACA,gBAAgBA,CAACA,mBAAmBA,EAAEA,IAAIA,CAACA,CAACA;QAEzDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,QAAQA,CAACA,WAAWA,EAAEA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC/CA,yDAAyDA;YACzDA,IAAIA,CAACA,OAAOA,CAACA,gBAAgBA,CAACA,wBAAwBA,EAAEA,IAAIA,CAACA,CAACA;YAC9DA,IAAIA,CAACA,cAAcA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,IAAIA,CAACA,CAACA;YACnDA,IAAIA,CAACA,cAAcA,CAACA,SAASA,CAACA,GAAGA,CAACA,yBAAyBA,CAACA,CAACA;YAC7DA,IAAIA,CAACA,cAAcA,CAACA,SAASA,GAAGA,WAAWA,CAACA;YAC5CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,kBAAkBA,CAACA,CAACA,CAACA;gBAClCA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,CAACA,YAAYA,CAACA,IAAIA,CAACA,cAAcA,EAAEA,IAAIA,CAACA,OAAOA,CAACA,kBAAkBA,CAACA,CAACA;YAC/FA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,IAAIA,CAACA,OAAOA,CAACA,UAAUA,CAACA,WAAWA,CAACA,IAAIA,CAACA,cAAcA,CAACA,CAACA;YAC7DA,CAACA;YACDA,IAAIA,CAACA,cAAcA,GAAGA,IAAIA,CAACA,cAAcA,CAACA,iBAAgCA,CAACA;QAC/EA,CAACA;IACLA,CAACA;IAEDjB;;OAEGA;IACKA,0BAAOA,GAAfA,UAAgBA,MAAeA;QAC3BkB,IAAIA,IAAIA,GAAYA,MAAMA,CAACA,SAASA,CAACA,QAAQA,CAACA,YAAYA,CAACA,CAACA;QAC5DA,MAAMA,CAACA,YAAYA,CAACA,eAAeA,EAAEA,IAAIA,CAACA,QAAQA,EAAEA,CAACA,CAACA;QAEtDA,iCAAiCA;QACjCA,EAAEA,CAACA,CAACA,CAACA,MAAMA,CAACA,YAAYA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA;YAC/BA,MAAMA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,QAAQA,CAACA,CAACA;QAC1CA,CAACA;QAEDA,IAAIA,CAACA,IAAIA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,QAAQA,CAACA,CAACA;QACzCA,IAAIA,CAACA,IAAIA,CAACA,YAAYA,CAACA,UAAUA,EAAEA,GAAGA,CAACA,CAACA;QACxCA,IAAIA,CAACA,IAAIA,CAACA,YAAYA,CAACA,eAAeA,EAAEA,IAAIA,CAACA,QAAQA,EAAEA,CAACA,CAACA;QACzDA,IAAIA,CAACA,IAAIA,CAACA,YAAYA,CAACA,eAAeA,EAAEA,MAAMA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA,CAACA;IACvEA,CAACA;IACLlB,eAACA;AAADA,CAACA,AAhWD,IAgWC;AAhWY,gBAAQ,WAgWpB,CAAA","sourcesContent":["import { SlideToggle } from '../../core/animations/SlideToggle';\r\nimport { Utils } from './../../core/utils';\r\n\r\nconst TOGGLE_CLASS: string = 'collapse__details--open';\r\nconst TOGGLE_TITLE_CLASS: string = 'collapse__title--open';\r\n\r\n/**\r\n * @class Collapse\r\n * Creates a summary / details like element, which opens the details on click\r\n * of the title.\r\n * Example:\r\n * <code>\r\n *     <div class=\"collapse\">\r\n *          <div x-uno-collapse>\r\n *              <i class=\"collapse__indicator\"></i>\r\n *              <span class=\"collapse__title\">Titel van collapse</span>\r\n *          </div>\r\n *          <div class=\"collapse__details\">\r\n *              Humani generiss sunt dominas de nobilis compater.\r\n *              Cliniass cadunt in audax cirpi! Est placidus urbs, cesaris.\r\n *          </div>\r\n *      </div>\r\n *      <script>\r\n *          // Load collapse component\r\n *          System.import('/uno/components/collapse/collapse.js').then(function (module) {\r\n *             // Select all <details> elements on the page\r\n *              var collapses = document.querySelectorAll('[x-uno-collapse]');\r\n *              // Initialize all collapses\r\n *              for (var i = 0; i < collapses.length; i++) {\r\n *                 new module.Collapse(collapses.item(i));\r\n *              }\r\n *          });\r\n *      </script>\r\n * </code>\r\n */\r\nexport class Collapse {\r\n\r\n    private animate: SlideToggle;\r\n\r\n    private details: HTMLElement;\r\n    private detailsSibling: HTMLElement;\r\n\r\n    private groupedCollapses: Array<Node>;\r\n\r\n    /**\r\n     * @constructor\r\n     * @param host Element The element which contains a x-uno-collapse attribute\r\n     */\r\n    constructor(private host: Element) {\r\n\r\n        if (!host) {\r\n            return;\r\n        }\r\n\r\n        if ((this.host as any).hasOwnProperty('unoCollapse')) {\r\n            // This element is already initialized\r\n            return;\r\n        }\r\n        (this.host as any).unoCollapse = true;\r\n\r\n        if (!host.hasAttribute('x-uno-collapse')) {\r\n            // The attribute is mandatory\r\n            host.setAttribute('x-uno-collapse', '');\r\n        }\r\n\r\n        if (host.hasAttribute('data-collapse-target')) {\r\n            console.warn('[data-collapse-target] is deprecated and will be removed in version 4 in favor of [x-uno-collapse-target]');\r\n        }\r\n\r\n        if (host.hasAttribute('data-collapse-group')) {\r\n            console.warn('[data-collapse-group] is deprecated and will be removed in version 4 in favor of [x-uno-collapse-group]');\r\n        }\r\n\r\n        this.details = this.findTarget(host);\r\n\r\n        this.host.addEventListener('click', this);\r\n        this.host.addEventListener('keydown', this);\r\n        this.host.addEventListener('collapse-open', this);\r\n        this.host.addEventListener('collapse-close', this);\r\n\r\n        this.details.addEventListener('keydown', (event: KeyboardEvent) => {\r\n            if (Utils.IsKeyPressed(event, 'Escape') || Utils.IsKeyPressed(event, '')) {\r\n                this.close();\r\n            }\r\n            if (Utils.IsKeyPressed(event, 'Tab')) {\r\n                Utils.FocusChild(event, this.details.querySelectorAll('li a'));\r\n            }\r\n        });\r\n\r\n        this.setupAnimation();\r\n        this.groupCollapses(host);\r\n\r\n    }\r\n\r\n    /**\r\n     * Closes the collapse\r\n     */\r\n    close(): void {\r\n        if (this.details.classList.contains(TOGGLE_CLASS)) {\r\n            let event: any = document.createEvent('CustomEvent');\r\n            event.initCustomEvent('collapse-close', true, true, this.details);\r\n            this.host.dispatchEvent(event);\r\n            let hostElement: HTMLElement = this.host as HTMLElement;\r\n            hostElement.focus();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens the collapse\r\n     */\r\n    open(): void {\r\n        if (!this.details.classList.contains(TOGGLE_CLASS)) {\r\n            let event: any = document.createEvent('CustomEvent');\r\n            event.initCustomEvent('collapse-open', true, true, this.details);\r\n            this.host.dispatchEvent(event);\r\n            this.focusFirstChild();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Focuses the first child\r\n     */\r\n    focusFirstChild(): void {\r\n        let firstChild: HTMLElement = this.details.querySelector('li a') as HTMLElement;\r\n        if (firstChild) {\r\n            firstChild.focus();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes all references to allow GC\r\n     */\r\n    destroy(): void {\r\n        this.host.removeEventListener('collapse-open', this);\r\n        this.host.removeEventListener('collapse-close', this);\r\n        this.host.removeEventListener('click', this);\r\n        this.host.removeEventListener('keydown', this);\r\n\r\n        delete (this.host as any).unoCollapse;\r\n        this.details.removeEventListener('keydown', this);\r\n        this.details.removeEventListener('uno-animation-end', this);\r\n        this.details.removeEventListener('uno-animation-progress', this);\r\n\r\n        if (this.groupedCollapses) {\r\n            this.groupedCollapses.forEach((collapse: Element) => {\r\n                collapse.removeEventListener('collapse-open', this);\r\n            });\r\n\r\n            this.groupedCollapses = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles all events for this component\r\n     * @private\r\n     * @param {Event} event\r\n     */\r\n    handleEvent(event: Event): void {\r\n\r\n        switch (event.currentTarget) {\r\n            case this.host:\r\n                switch (event.type) {\r\n                    case 'click':\r\n                        this.onTitleClick();\r\n                        break;\r\n                    case 'keydown':\r\n                        this.onTitleKeyDown(event as KeyboardEvent);\r\n                        break;\r\n                    case 'collapse-open':\r\n                        this.onCollapseOpen(event);\r\n                        break;\r\n                    case 'collapse-close':\r\n                        this.onCollapseClose(event);\r\n                        break;\r\n                    default:\r\n                    // nothing\r\n                }\r\n                break;\r\n            case this.details:\r\n                let eventType: string = Utils.CamelCase(event.type);\r\n                this[`onDetails${eventType}`](event);\r\n\r\n                break;\r\n            default:\r\n                if (event.type === 'collapse-open') {\r\n                    this.onCollapseGroupOpen(event);\r\n                }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens / closes the details. The open / close is done through the\r\n     * animation class.\r\n     */\r\n    toggle(): void {\r\n        this.details = this.findTarget(this.host);\r\n\r\n        if (this.details.classList.contains(TOGGLE_CLASS)) {\r\n            this.close();\r\n        } else {\r\n            this.open();\r\n        }\r\n    }\r\n\r\n    private onCollapseOpen(event: Event): void {\r\n        if (!event.defaultPrevented) {\r\n            this.animate.toggle(true);\r\n        }\r\n    }\r\n\r\n    private onCollapseClose(event: Event): void {\r\n        if (!event.defaultPrevented) {\r\n            this.animate.toggle(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when a collapse in the same group is opened. Close other collapses\r\n     * @param {CustomEvent} evt\r\n     */\r\n    private onCollapseGroupOpen(evt: Event): void {\r\n        if (evt.currentTarget !== this.host && (evt as CustomEvent).detail !== this.details) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when the user clicks the .collapse__title\r\n     */\r\n    private onTitleClick(): void {\r\n        this.toggle();\r\n    }\r\n\r\n    /**\r\n     * Add keyboard support, toggle details on ENTER or SPACE key\r\n     * @param event\r\n     */\r\n    private onTitleKeyDown(event: KeyboardEvent): void {\r\n        if (Utils.IsKeyPressed(event, 'Enter') || Utils.IsKeyPressed(event, ' ')) {\r\n            event.preventDefault();\r\n            this.toggle();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Callback for when the animation has finished\r\n     */\r\n    private onDetailsUnoAnimationEnd(): void {\r\n        // Update aria attributes\r\n        let isVisible: Boolean = this.details.classList.contains(TOGGLE_CLASS);\r\n\r\n        this.host.classList.remove(TOGGLE_TITLE_CLASS);\r\n        if (isVisible) {\r\n            this.host.classList.add(TOGGLE_TITLE_CLASS);\r\n        }\r\n        this.host.setAttribute('aria-expanded', isVisible.toString());\r\n        this.details.setAttribute('aria-expanded', isVisible.toString());\r\n    }\r\n\r\n    private onDetailsUnoAnimationProgress(event: CustomEvent): void {\r\n        this.detailsSibling.style.paddingTop = Math.round(event.detail) + 'px';\r\n    }\r\n\r\n    /**\r\n     * Finds the target for the collapse. The collapse is either found by\r\n     * - id, specified in x-uno-collapse-target\r\n     * - id, specified in data-collapse-target\r\n     * - location in dom, next to the host.\r\n     * @param host\r\n     * @return {HTMLElement}\r\n     */\r\n    private findTarget(host: Element): HTMLElement {\r\n        let target: Element;\r\n\r\n        if (host.hasAttribute('x-uno-collapse-target')) {\r\n            target = document.getElementById(host.getAttribute('x-uno-collapse-target'));\r\n        } else if (host.hasAttribute('data-collapse-target')) {\r\n            // For backwards compatibility\r\n            target = document.getElementById(host.getAttribute('data-collapse-target'));\r\n        } else if (host.nextElementSibling && host.nextElementSibling.classList.contains('collapse__details')) {\r\n            target = host.nextElementSibling;\r\n        }\r\n\r\n        if (!target) {\r\n            throw new Error(`Collapse cannot find collapse target`);\r\n        }\r\n\r\n        // Set an id if not present. This is needed for ARIA attributes\r\n        if (!target.hasAttribute('id')) {\r\n            target.setAttribute('id', Utils.GenerateUID());\r\n        }\r\n\r\n        if (target.classList.contains(TOGGLE_CLASS)) {\r\n            this.host.classList.add(TOGGLE_TITLE_CLASS);\r\n        }\r\n\r\n        this.setAria(target);\r\n\r\n        return target as HTMLElement;\r\n    }\r\n\r\n    /**\r\n     * Groups all collapses bases on either\r\n     * - An attribute on each collapse, containing a group identifier (x-uno-collapse-group=\"{GROUPNAME}\")\r\n     * - An attribute on a wrapping element, containing the attribute x-uno-collapse\r\n     * @param host\r\n     */\r\n    private groupCollapses(host: Element): void {\r\n        let collapses: NodeList,\r\n            groupAttributes: Array<string> = ['x-uno-collapse-group', 'data-collapse-group'],\r\n            hostHasGroupAttribute: boolean = false;\r\n\r\n        // Check both flavors for backwards compatibility\r\n        groupAttributes.forEach((attribute: string) => {\r\n            if (host.hasAttribute(attribute)) {\r\n                let groupId: string = host.getAttribute(attribute);\r\n                collapses = document.querySelectorAll(`[${attribute}=\"${groupId}\"]`);\r\n                hostHasGroupAttribute = true;\r\n            }\r\n        });\r\n\r\n        if (!hostHasGroupAttribute) {\r\n            // Group attribute not found on host, traverse the dom up to the\r\n            // <body> tag, checking if any parent contains the group attribute.\r\n            while (host.parentElement && !collapses) {\r\n                host = host.parentElement;\r\n\r\n                groupAttributes.forEach((attribute: string) => {\r\n                    if (host.hasAttribute(attribute)) {\r\n                        // Group found, select all collapses inside group element\r\n                        collapses = host.querySelectorAll(`[x-uno-collapse]`);\r\n                    }\r\n                });\r\n\r\n            }\r\n        }\r\n\r\n        if (collapses) {\r\n            this.groupedCollapses = [];\r\n\r\n            for (let i: number = 0; i < collapses.length; i++) {\r\n                this.groupedCollapses.push(collapses.item(i));\r\n                collapses.item(i).addEventListener('collapse-open', this);\r\n            }\r\n        }\r\n    }\r\n\r\n    private setupAnimation(): void {\r\n\r\n        this.animate = new SlideToggle(this.details as HTMLElement);\r\n        this.animate.toggleClass = TOGGLE_CLASS;\r\n        this.animate.animationDuration = 1;\r\n\r\n        this.details.addEventListener('uno-animation-end', this);\r\n\r\n        if (this.details.nodeName.toLowerCase() === 'tr') {\r\n            // We're animating a table, some extra work required here\r\n            this.details.addEventListener('uno-animation-progress', this);\r\n            this.detailsSibling = document.createElement('tr');\r\n            this.detailsSibling.classList.add('collapse__table-divider');\r\n            this.detailsSibling.innerHTML = '<td></td>';\r\n            if (this.details.nextElementSibling) {\r\n                this.details.parentNode.insertBefore(this.detailsSibling, this.details.nextElementSibling);\r\n            } else {\r\n                this.details.parentNode.appendChild(this.detailsSibling);\r\n            }\r\n            this.detailsSibling = this.detailsSibling.firstElementChild as HTMLElement;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds aria attributes to host & target element\r\n     */\r\n    private setAria(target: Element): void {\r\n        let open: boolean = target.classList.contains(TOGGLE_CLASS);\r\n        target.setAttribute('aria-expanded', open.toString());\r\n\r\n        // Do not override default region\r\n        if (!target.hasAttribute('role')) {\r\n            target.setAttribute('role', 'region');\r\n        }\r\n\r\n        this.host.setAttribute('role', 'button');\r\n        this.host.setAttribute('tabindex', '0');\r\n        this.host.setAttribute('aria-expanded', open.toString());\r\n        this.host.setAttribute('aria-controls', target.getAttribute('id'));\r\n    }\r\n}\r\n"]}